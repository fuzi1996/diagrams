<mxfile host="app.diagrams.net" modified="2022-04-07T11:46:43.818Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36 Edg/100.0.1185.29" etag="p55kJcJ7VhpCYJdHTuzv" version="17.4.0" type="github" pages="7">
  <diagram id="jcYxK1SAGMSF88Rx-105" name="SkyWalkingAgent">
    <mxGraphModel dx="3519" dy="1778" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <object label="" id="fp3vOLmL03Cuk98-rYLO-73">
          <mxCell style="group" parent="1" vertex="1" connectable="0">
            <mxGeometry x="-1710" y="50" width="3181.5" height="1030" as="geometry" />
          </mxCell>
        </object>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-67" value="" style="group" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1" connectable="0">
          <mxGeometry x="-690" y="-820" width="1305" height="780" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-65" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;fillColor=#D5E8D4;size=0.15;" parent="fp3vOLmL03Cuk98-rYLO-67" vertex="1">
          <mxGeometry x="350" y="-280" width="50" height="940" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-61" value="&lt;pre style=&quot;color: rgb(8, 8, 8); font-family: &amp;quot;jetbrains mono&amp;quot;, monospace; font-size: 13.5pt;&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;SkyWalkingAgent&lt;/span&gt;&lt;/pre&gt;" style="html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;" parent="fp3vOLmL03Cuk98-rYLO-67" vertex="1">
          <mxGeometry x="100" y="165" width="192.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontColor=#000000;" parent="fp3vOLmL03Cuk98-rYLO-67" source="fp3vOLmL03Cuk98-rYLO-61" target="fp3vOLmL03Cuk98-rYLO-65" edge="1">
          <mxGeometry as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-69" value="&lt;div style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 13.5pt&quot;&gt;&lt;span&gt;public static void &lt;/span&gt;&lt;span&gt;premain&lt;/span&gt;(&lt;span&gt;String &lt;/span&gt;agentArgs, &lt;span&gt;Instrumentation &lt;/span&gt;instrumentation)&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 13.5pt&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;color: rgb(8 , 8 , 8) ; font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// 1.&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;初始化配置&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;color: rgb(8 , 8 , 8) ; font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;SnifferConfigInitializer&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;initializeCoreConfig&lt;/span&gt;(agentArgs);&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;// 2.&lt;span style=&quot;font-size: 13.5pt ; color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;加载插件&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;pluginFinder &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;PluginFinder(&lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;PluginBootstrap().loadPlugins());&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// 3.&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;定制化&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;Agent&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;行为&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;创建&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;ByteBuddy&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;实例&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;final &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;ByteBuddy byteBuddy &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;ByteBuddy().with(&lt;span style=&quot;color: #000000&quot;&gt;TypeValidation&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;of&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Config&lt;/span&gt;.&lt;span style=&quot;color: #000000&quot;&gt;Agent&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;IS_OPEN_DEBUGGING_CLASS&lt;/span&gt;));&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;指定&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;ByteBuddy&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;要忽略的类&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;AgentBuilder &lt;/span&gt;agentBuilder = &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;AgentBuilder&lt;/span&gt;.Default(&lt;span style=&quot;color: #000000&quot;&gt;byteBuddy&lt;/span&gt;).ignore...&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;将必要的类注入到&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;Bootstrap ClassLoader&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;agentBuilder = &lt;span style=&quot;color: #000000&quot;&gt;BootstrapInstrumentBoost&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;inject&lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;pluginFinder&lt;/span&gt;, instrumentation, agentBuilder, &lt;span style=&quot;color: #000000&quot;&gt;edgeClasses&lt;/span&gt;);&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;解决&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;JDK&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;模块系统的跨模块类访问&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;agentBuilder = &lt;span style=&quot;color: #000000&quot;&gt;JDK9ModuleExporter&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;openReadEdge&lt;/span&gt;(instrumentation, agentBuilder, &lt;span style=&quot;color: #000000&quot;&gt;edgeClasses&lt;/span&gt;);&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;agentBuilder.type(&lt;span style=&quot;color: #000000&quot;&gt;pluginFinder&lt;/span&gt;.buildMatch())    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;指定&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;ByteBuddy&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;要拦截的类&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;            &lt;/span&gt;.transform(&lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;Transformer(&lt;span style=&quot;color: #000000&quot;&gt;pluginFinder&lt;/span&gt;))&lt;br&gt;            &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;构建策略是&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;RETRANSFORMATION&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;            &lt;/span&gt;.with(&lt;span style=&quot;color: #000000&quot;&gt;AgentBuilder&lt;/span&gt;.&lt;span style=&quot;color: #000000&quot;&gt;RedefinitionStrategy&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;RETRANSFORMATION&lt;/span&gt;)   &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// redefine&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;和&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;retransform&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;的区别在于是否保留修改前的内容&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;            &lt;/span&gt;.with(&lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;RedefinitionListener())&lt;br&gt;            .with(&lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;Listener())&lt;br&gt;            .installOn(instrumentation);&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// 4.&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;启动服务&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;ServiceManager&lt;/span&gt;.&lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;INSTANCE&lt;/span&gt;.boot();&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// 5.&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;注册关闭钩子&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;font-size: 13.5pt&quot;&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;Runtime&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;getRuntime&lt;/span&gt;()&lt;br&gt;        .addShutdownHook(&lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;new &lt;/span&gt;Thread(&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;ServiceManager&lt;/span&gt;.&lt;span style=&quot;color: rgb(135 , 16 , 148) ; font-style: italic&quot;&gt;INSTANCE&lt;/span&gt;::shutdown, &lt;span style=&quot;color: rgb(6 , 125 , 23)&quot;&gt;&quot;skywalking service shutdown thread&quot;&lt;/span&gt;));&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;" parent="fp3vOLmL03Cuk98-rYLO-67" vertex="1">
          <mxGeometry x="380" y="-270" width="720" height="230" as="geometry" />
        </mxCell>
        <UserObject label="&lt;pre style=&quot;color: rgb(8 , 8 , 8) ; font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 6px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-size: 6px&quot;&gt;BootstrapInstrumentBoost&lt;/span&gt;.&lt;span style=&quot;font-style: italic ; font-size: 6px&quot;&gt;inject注入必要类&lt;/span&gt;&lt;/pre&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,OAw_hoLMBTS5bxCV4UUr&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;g6Urny8PRm-vhi32PskJ-2&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="TMjDlIonQJgpy8vfbM1B-1">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#B266FF;labelBorderColor=none;fontSize=6;" vertex="1" parent="fp3vOLmL03Cuk98-rYLO-67">
            <mxGeometry x="790" y="165" width="270" height="20" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 6px&quot;&gt;Transformer&lt;/pre&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;fp3vOLmL03Cuk98-rYLO-98&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="QR0eldKki9RaqM_KlBfl-1">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#B266FF;labelBorderColor=none;fontSize=6;" vertex="1" parent="fp3vOLmL03Cuk98-rYLO-67">
            <mxGeometry x="790" y="340" width="70" height="20" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="Transformer" link="/app" id="fp3vOLmL03Cuk98-rYLO-97">
          <mxCell style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;aspect=fixed;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
            <mxGeometry x="850" y="-540" width="933" height="704" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-98" value="public DynamicType.Builder&lt;?&gt; transform(final DynamicType.Builder&lt;?&gt; builder, // 当前拦截到的类的字节码&#xa;                                        final TypeDescription typeDescription, // 简单当成Class,它包含了类的描述信息&#xa;                                        final ClassLoader classLoader, // 加载[当前拦截到的类]的类加载器&#xa;                                        final JavaModule module)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-97" vertex="1">
          <mxGeometry y="26" width="933" height="74" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-106" value="" style="group" parent="fp3vOLmL03Cuk98-rYLO-97" vertex="1" connectable="0">
          <mxGeometry y="100" width="933" height="604" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-104" value="&lt;pre style=&quot;text-align: left ; background-color: rgb(255 , 255 , 255) ; color: rgb(8 , 8 , 8) ; font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// 1)&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;查找所有能够对当前被拦截到的类生效的插件&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;List&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;AbstractClassEnhancePluginDefine&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;pluginDefines &lt;/span&gt;= &lt;span style=&quot;color: rgb(135 , 16 , 148)&quot;&gt;pluginFinder&lt;/span&gt;.find(typeDescription);&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;pluginDefines&lt;/span&gt;.size() &amp;gt; &lt;span style=&quot;color: rgb(23 , 80 , 235)&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;DynamicType&lt;/span&gt;.&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;Builder&lt;/span&gt;&amp;lt;?&amp;gt; newBuilder = builder;&lt;br&gt;    &lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// 2)&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;增强上下文&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;EnhanceContext context &lt;/span&gt;= &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;new &lt;/span&gt;EnhanceContext();&lt;br&gt;    &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;AbstractClassEnhancePluginDefine define &lt;/span&gt;: &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;pluginDefines&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// 3)&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;调用每个插件的&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;define()&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;方法去做字节码增强&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;调用每个插件的&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;define()&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;方法去做字节码增强，实际调用了&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;AbstractClassEnhancePluginDefine&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;define()&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;方法&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;DynamicType&lt;/span&gt;.&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;Builder&lt;/span&gt;&amp;lt;?&amp;gt; &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;possibleNewBuilder &lt;/span&gt;= &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;define&lt;/span&gt;.define(&lt;br&gt;                typeDescription, newBuilder, classLoader, &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;context&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;possibleNewBuilder &lt;/span&gt;!= &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;            newBuilder = &lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;possibleNewBuilder&lt;/span&gt;;&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;context&lt;/span&gt;.isEnhanced()) {&lt;br&gt;        &lt;span style=&quot;color: rgb(135 , 16 , 148) ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.debug(&lt;span style=&quot;color: rgb(6 , 125 , 23)&quot;&gt;&quot;Finish the prepare stage for {}.&quot;&lt;/span&gt;, typeDescription.getName());&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;return &lt;/span&gt;newBuilder; &lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;被所有可用插件修改完之后的最终字节码&lt;br&gt;&lt;/span&gt;}&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: rgb(135 , 16 , 148) ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.debug(&lt;span style=&quot;color: rgb(6 , 125 , 23)&quot;&gt;&quot;Matched class {}, but ignore by finding mechanism.&quot;&lt;/span&gt;, typeDescription.getTypeName());&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 51 , 179)&quot;&gt;return &lt;/span&gt;builder; &lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: rgb(140 , 140 , 140) ; font-style: italic ; font-family: , monospace&quot;&gt;被拦截到的类的原生字节码&lt;/span&gt;&lt;/pre&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontColor=#000000;" parent="fp3vOLmL03Cuk98-rYLO-106" vertex="1">
          <mxGeometry y="74" width="1000" height="530" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-105" value="public DynamicType.Builder&lt;?&gt; transform(final DynamicType.Builder&lt;?&gt; builder, // 当前拦截到的类的字节码&#xa;                                        final TypeDescription typeDescription, // 简单当成Class,它包含了类的描述信息&#xa;                                        final ClassLoader classLoader, // 加载[当前拦截到的类]的类加载器&#xa;                                        final JavaModule module)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-106" vertex="1">
          <mxGeometry width="585" height="74" as="geometry" />
        </mxCell>
        <UserObject label="&lt;pre style=&quot;font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 6px&quot;&gt;&lt;span style=&quot;font-family: helvetica; font-size: 12px; font-weight: 700;&quot;&gt;AbstractClassEnhancePluginDefine&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;fp3vOLmL03Cuk98-rYLO-40&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="QR0eldKki9RaqM_KlBfl-42">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=#B266FF;labelBorderColor=none;fontSize=6;fontColor=default;" vertex="1" parent="fp3vOLmL03Cuk98-rYLO-106">
            <mxGeometry x="470" y="190" width="210" height="20" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;line-height: 1&quot;&gt;&lt;/p&gt;&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 6px&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-weight: 700&quot;&gt;AbstractClassEnhancePluginDefine@&lt;/span&gt;&lt;/pre&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;define&lt;/span&gt;&lt;p&gt;&lt;/p&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,bPdborauj047S1uwVQfw&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;4RfiTCdkxrfO4A5RfZwv-21&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="Y0NhZbVhUEMunt5_y4ys-1">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;labelBackgroundColor=#B266FF;labelBorderColor=none;fontSize=6;fontColor=default;" vertex="1" parent="fp3vOLmL03Cuk98-rYLO-106">
            <mxGeometry x="647" y="274.5" width="213" height="55" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-102" value="" style="endArrow=classic;html=1;fontFamily=Helvetica;fontColor=#000000;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="QR0eldKki9RaqM_KlBfl-1" target="fp3vOLmL03Cuk98-rYLO-98" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="-330" as="sourcePoint" />
            <mxPoint x="580" y="-380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-114" value="" style="endArrow=classic;html=1;fontFamily=Helvetica;fontSize=18;fontColor=#000000;entryX=-0.005;entryY=0.101;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="QR0eldKki9RaqM_KlBfl-42" target="fp3vOLmL03Cuk98-rYLO-40" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1900" y="-80" as="sourcePoint" />
            <mxPoint x="1610" y="-260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-20" value="DubboInstrumentation" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
          <mxGeometry x="1991.5" y="320" width="415" height="136" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-21" value="protected ClassMatch enhanceClass&#xa;&#xa;指定插件增强哪个类的字节码" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-20" vertex="1">
          <mxGeometry y="26" width="415" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-23" value="public InstanceMethodsInterceptPoint[] getInstanceMethodsInterceptPoints()&#xa;&#xa;拿到实例方法的拦截点" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-20" vertex="1">
          <mxGeometry y="81" width="415" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-30" value="ClassInstanceMethodsEnhancePluginDefine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
          <mxGeometry x="1994" y="100" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="fp3vOLmL03Cuk98-rYLO-20" target="fp3vOLmL03Cuk98-rYLO-30" edge="1">
          <mxGeometry x="1964" y="-250" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-40" value="AbstractClassEnhancePluginDefine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
          <mxGeometry x="1964" y="-240" width="470" height="246" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-41" value="public DynamicType.Builder&lt;?&gt; define(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; builder,&#xa;    ClassLoader classLoader, EnhanceContext context)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-40" vertex="1">
          <mxGeometry y="26" width="470" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-116" value="protected DynamicType.Builder&lt;?&gt; enhance(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; newClassBuilder,&#xa;                                         ClassLoader classLoader, EnhanceContext context)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-40" vertex="1">
          <mxGeometry y="81" width="470" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-115" value="protected abstract ClassMatch enhanceClass()&#xa;&#xa;指定插件增强哪个类的字节码" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-40" vertex="1">
          <mxGeometry y="136" width="470" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-44" value="public abstract InstanceMethodsInterceptPoint[] getInstanceMethodsInterceptPoints()&#xa;&#xa;拿到实例方法的拦截点" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-40" vertex="1">
          <mxGeometry y="191" width="470" height="55" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="fp3vOLmL03Cuk98-rYLO-30" target="fp3vOLmL03Cuk98-rYLO-40" edge="1">
          <mxGeometry x="1964" y="-250" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-46" value="&lt;InstanceMethodsAroundInterceptor&gt;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
          <mxGeometry x="2644" y="-250" width="415" height="146" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-56" value="void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;    MethodInterceptResult result)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-46" vertex="1">
          <mxGeometry y="26" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-57" value="Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;    Object ret)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-46" vertex="1">
          <mxGeometry y="66" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-47" value="void handleMethodException(EnhancedInstance objInst, Method method, Object[] allArguments,&#xa;    Class&lt;?&gt;[] argumentsTypes, Throwable t)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-46" vertex="1">
          <mxGeometry y="106" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="fp3vOLmL03Cuk98-rYLO-40" target="fp3vOLmL03Cuk98-rYLO-46" edge="1">
          <mxGeometry x="1964" y="-250" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="fp3vOLmL03Cuk98-rYLO-73" source="fp3vOLmL03Cuk98-rYLO-51" target="fp3vOLmL03Cuk98-rYLO-46" edge="1">
          <mxGeometry x="1964" y="-250" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-51" value="DubboInterceptor" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="fp3vOLmL03Cuk98-rYLO-73" vertex="1">
          <mxGeometry x="2521.5" y="290" width="660" height="146" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-52" value="public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;                         MethodInterceptResult result)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-51" vertex="1">
          <mxGeometry y="26" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-55" value="public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;                          Object ret)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-51" vertex="1">
          <mxGeometry y="66" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-53" value="public void handleMethodException(EnhancedInstance objInst, Method method, Object[] allArguments,&#xa;                                  Class&lt;?&gt;[] argumentsTypes, Throwable t)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="fp3vOLmL03Cuk98-rYLO-51" vertex="1">
          <mxGeometry y="106" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fp3vOLmL03Cuk98-rYLO-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.002;entryY=0.122;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Helvetica;fontColor=#000000;" parent="fp3vOLmL03Cuk98-rYLO-73" source="fp3vOLmL03Cuk98-rYLO-23" target="fp3vOLmL03Cuk98-rYLO-51" edge="1">
          <mxGeometry x="1964" y="-250" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="bPdborauj047S1uwVQfw" name="AbstractClassEnhancePluginDefine">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="ijRunIeEE7-H-GXSzR4P-0" />
        <mxCell id="ijRunIeEE7-H-GXSzR4P-1" parent="ijRunIeEE7-H-GXSzR4P-0" />
        <mxCell id="nb4OjA0rYiMwRU8K35Q2-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-15" target="nb4OjA0rYiMwRU8K35Q2-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-15" value="DubboInstrumentation" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="1961.5" y="820" width="415" height="136" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-16" value="protected ClassMatch enhanceClass&#xa;&#xa;指定插件增强哪个类的字节码" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-15" vertex="1">
          <mxGeometry y="26" width="415" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-17" value="public InstanceMethodsInterceptPoint[] getInstanceMethodsInterceptPoints()&#xa;&#xa;拿到实例方法的拦截点" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-15" vertex="1">
          <mxGeometry y="81" width="415" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-18" value="ClassEnhancePluginDefine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="1826" y="480" width="686" height="136" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-40" value="protected DynamicType.Builder&lt;?&gt; enhanceClass(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; newClassBuilder,&#xa;                                              ClassLoader classLoader)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-18" vertex="1">
          <mxGeometry y="26" width="686" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-41" value="protected DynamicType.Builder&lt;?&gt; enhanceInstance(TypeDescription typeDescription,&#xa;                                                 DynamicType.Builder&lt;?&gt; newClassBuilder, ClassLoader classLoader,&#xa;                                                 EnhanceContext context)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-18" vertex="1">
          <mxGeometry y="81" width="686" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-20" value="AbstractClassEnhancePluginDefine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="1834" y="60" width="670" height="356" as="geometry" />
        </mxCell>
        <mxCell id="nV9t4POKjDZwEGFRDg3n-3" value="调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="4RfiTCdkxrfO4A5RfZwv-20" source="4RfiTCdkxrfO4A5RfZwv-21" target="4RfiTCdkxrfO4A5RfZwv-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-44" y="54" />
              <mxPoint x="-44" y="109" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-21" value="public DynamicType.Builder&lt;?&gt; define(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; builder,&#xa;    ClassLoader classLoader, EnhanceContext context)&#xa;字节码增强" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="26" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="nV9t4POKjDZwEGFRDg3n-4" value="调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="4RfiTCdkxrfO4A5RfZwv-20" source="4RfiTCdkxrfO4A5RfZwv-22" target="4RfiTCdkxrfO4A5RfZwv-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-54" y="109" />
              <mxPoint x="-54" y="164" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nV9t4POKjDZwEGFRDg3n-5" value="调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="4RfiTCdkxrfO4A5RfZwv-20" source="4RfiTCdkxrfO4A5RfZwv-22" target="4RfiTCdkxrfO4A5RfZwv-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-24" y="109" />
              <mxPoint x="-24" y="219" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-22" value="protected DynamicType.Builder&lt;?&gt; enhance(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; newClassBuilder,&#xa;                                         ClassLoader classLoader, EnhanceContext context)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="81" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-38" value="protected abstract DynamicType.Builder&lt;?&gt; enhanceClass(TypeDescription typeDescription, DynamicType.Builder&lt;?&gt; newClassBuilder,&#xa;                                              ClassLoader classLoader)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="136" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-39" value="protected abstract DynamicType.Builder&lt;?&gt; enhanceInstance(TypeDescription typeDescription,&#xa;                                                 DynamicType.Builder&lt;?&gt; newClassBuilder, ClassLoader classLoader,&#xa;                                                 EnhanceContext context)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="191" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-23" value="protected abstract ClassMatch enhanceClass()&#xa;&#xa;指定插件增强哪个类的字节码" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="246" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-24" value="public abstract InstanceMethodsInterceptPoint[] getInstanceMethodsInterceptPoints()&#xa;&#xa;拿到实例方法的拦截点" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-20" vertex="1">
          <mxGeometry y="301" width="670" height="55" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-18" target="4RfiTCdkxrfO4A5RfZwv-20" edge="1">
          <mxGeometry x="1934" y="120" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-26" value="&lt;InstanceMethodsAroundInterceptor&gt;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="2614" y="215" width="415" height="146" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-27" value="void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;    MethodInterceptResult result)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-26" vertex="1">
          <mxGeometry y="26" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-28" value="Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;    Object ret)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-26" vertex="1">
          <mxGeometry y="66" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-29" value="void handleMethodException(EnhancedInstance objInst, Method method, Object[] allArguments,&#xa;    Class&lt;?&gt;[] argumentsTypes, Throwable t)" style="text;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-26" vertex="1">
          <mxGeometry y="106" width="415" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-23" target="4RfiTCdkxrfO4A5RfZwv-26" edge="1">
          <mxGeometry x="1934" y="120" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-32" target="4RfiTCdkxrfO4A5RfZwv-26" edge="1">
          <mxGeometry x="1934" y="120" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-32" value="DubboInterceptor" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="2491.5" y="910" width="660" height="146" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-33" value="public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;                         MethodInterceptResult result)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-32" vertex="1">
          <mxGeometry y="26" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-34" value="public Object afterMethod(EnhancedInstance objInst, Method method, Object[] allArguments, Class&lt;?&gt;[] argumentsTypes,&#xa;                          Object ret)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-32" vertex="1">
          <mxGeometry y="66" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-35" value="public void handleMethodException(EnhancedInstance objInst, Method method, Object[] allArguments,&#xa;                                  Class&lt;?&gt;[] argumentsTypes, Throwable t)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="4RfiTCdkxrfO4A5RfZwv-32" vertex="1">
          <mxGeometry y="106" width="660" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4RfiTCdkxrfO4A5RfZwv-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.002;entryY=0.122;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Helvetica;fontColor=#000000;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-17" target="4RfiTCdkxrfO4A5RfZwv-32" edge="1">
          <mxGeometry x="1934" y="120" as="geometry" />
        </mxCell>
        <mxCell id="nV9t4POKjDZwEGFRDg3n-6" value="实现" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-40" target="4RfiTCdkxrfO4A5RfZwv-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1720" y="534" />
              <mxPoint x="1720" y="224" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nV9t4POKjDZwEGFRDg3n-7" value="实现" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="ijRunIeEE7-H-GXSzR4P-1" source="4RfiTCdkxrfO4A5RfZwv-41" target="4RfiTCdkxrfO4A5RfZwv-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nb4OjA0rYiMwRU8K35Q2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ijRunIeEE7-H-GXSzR4P-1" source="nb4OjA0rYiMwRU8K35Q2-0" target="4RfiTCdkxrfO4A5RfZwv-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nb4OjA0rYiMwRU8K35Q2-0" value="ClassInstanceMethodsEnhancePluginDefine" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
          <mxGeometry x="1826" y="680" width="686" height="81" as="geometry" />
        </mxCell>
        <mxCell id="nb4OjA0rYiMwRU8K35Q2-2" value="public StaticMethodsInterceptPoint[] getStaticMethodsInterceptPoints()&#xa;&#xa;返回null,因为这是实例方法增强插件所以静态方法拦截点为null" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="nb4OjA0rYiMwRU8K35Q2-0" vertex="1">
          <mxGeometry y="26" width="686" height="55" as="geometry" />
        </mxCell>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;静态方法拦截&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,sZyJ7JCyKFtk61LIewo1&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;MEL4W8bCHlu4tCylQ0Ov-3&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="AeTuncmcVHmOqCyvmqCn-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
            <mxGeometry x="2150" y="530" width="100" height="30" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="构造器拦截" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,0jK-QHVqDcvVZqY2DwQ2&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;2PPTYwz62WVgmd-tkEZw-4&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="C44WFTK9sFrmOVHTj8t_-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
            <mxGeometry x="2050" y="580" width="90" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;实例方法拦截&lt;/font&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,mvKNWSNfTr0rxeVtRS0I&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;TjCKasd4Xgn7ZYsPb9dK-0&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="qFVtOueDfUCoi0T2UkAu-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;" parent="ijRunIeEE7-H-GXSzR4P-1" vertex="1">
            <mxGeometry x="2160" y="590" width="80" height="30" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;JDK静态方法拦截&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,OAw_hoLMBTS5bxCV4UUr&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;DOyYYOP1NbwbdsIWEw-B-2&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="zcy3ywOJA6GGheOO6imC-1">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;labelBorderColor=none;fontColor=default;" vertex="1" parent="ijRunIeEE7-H-GXSzR4P-1">
            <mxGeometry x="2240" y="530" width="110" height="30" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;JDK实例方法拦截&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,OAw_hoLMBTS5bxCV4UUr&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;DOyYYOP1NbwbdsIWEw-B-2&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="4Uwiy-Gp3N2chWkjE6kz-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;labelBorderColor=none;fontColor=default;" vertex="1" parent="ijRunIeEE7-H-GXSzR4P-1">
            <mxGeometry x="2250" y="586" width="110" height="34" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="sZyJ7JCyKFtk61LIewo1" name="StaticMethodsInter">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="MEL4W8bCHlu4tCylQ0Ov-0" />
        <mxCell id="MEL4W8bCHlu4tCylQ0Ov-1" parent="MEL4W8bCHlu4tCylQ0Ov-0" />
        <mxCell id="MEL4W8bCHlu4tCylQ0Ov-2" value="StaticMethodsInter" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="MEL4W8bCHlu4tCylQ0Ov-1" vertex="1">
          <mxGeometry x="1910" y="120" width="686" height="70" as="geometry" />
        </mxCell>
        <mxCell id="MEL4W8bCHlu4tCylQ0Ov-3" value="public Object intercept(@Origin Class&lt;?&gt; clazz, @AllArguments Object[] allArguments, @Origin Method method,&#xa;    @SuperCall Callable&lt;?&gt; zuper)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="MEL4W8bCHlu4tCylQ0Ov-2" vertex="1">
          <mxGeometry y="26" width="686" height="44" as="geometry" />
        </mxCell>
        <mxCell id="x5ou0gorL2XBcBZEtr6q-0" value="非JDK类库,不修改入参的静态方法走这个拦截器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="MEL4W8bCHlu4tCylQ0Ov-1" vertex="1">
          <mxGeometry x="1910" y="50" width="390" height="20" as="geometry" />
        </mxCell>
        <mxCell id="vl7Rm8HOfdubgClSDS2Y-0" value="&lt;pre style=&quot;background-color: #ffffff ; color: #080808 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 13.5pt&quot;&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;这里直接使用&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;clazz.getClassLoader()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;是因为静态方法直接绑定了类&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #000000&quot;&gt;StaticMethodsAroundInterceptor interceptor &lt;/span&gt;= &lt;span style=&quot;color: #000000&quot;&gt;InterceptorInstanceLoader&lt;/span&gt;.&lt;span style=&quot;font-style: italic&quot;&gt;load&lt;/span&gt;(&lt;span style=&quot;color: #871094&quot;&gt;staticMethodsAroundInterceptorClassName&lt;/span&gt;, clazz&lt;br&gt;    .getClassLoader());&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: #000000&quot;&gt;MethodInterceptResult result &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;MethodInterceptResult();&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #000000&quot;&gt;interceptor&lt;/span&gt;.beforeMethod(clazz, method, allArguments, method.getParameterTypes(), &lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;);&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;    &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] before static method[{}] intercept failure&quot;&lt;/span&gt;, clazz, method.getName());&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: #000000&quot;&gt;Object &lt;/span&gt;ret = &lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;;&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;是否执行原方法&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;是否执行原方法默认为&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;true&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;，&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;如果插件的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;beforeMethod()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;方法实现中调用了&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;defineReturnValue()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;传入了返回值，则不会再调用原方法，直接返回传入的返回值&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(!&lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;.isContinue()) {&lt;br&gt;        ret = &lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;._ret();&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;else &lt;/span&gt;{&lt;br&gt;        &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;原方法的调用&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;quot;宋体&amp;quot; , monospace&quot;&gt;        &lt;/span&gt;ret = zuper.call();&lt;br&gt;    }&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;        &lt;span style=&quot;color: #000000&quot;&gt;interceptor&lt;/span&gt;.handleMethodException(clazz, method, allArguments, method.getParameterTypes(), t);&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t2) {&lt;br&gt;        &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t2, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] handle static method[{}] exception failure&quot;&lt;/span&gt;, clazz, method.getName(), t2.getMessage());&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;t;&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;finally &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;        ret = &lt;span style=&quot;color: #000000&quot;&gt;interceptor&lt;/span&gt;.afterMethod(clazz, method, allArguments, method.getParameterTypes(), ret);&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;        &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] after static method[{}] intercept failure:{}&quot;&lt;/span&gt;, clazz, method.getName(), t.getMessage());&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;ret;&lt;/pre&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="MEL4W8bCHlu4tCylQ0Ov-1" vertex="1">
          <mxGeometry x="1910" y="190" width="1120" height="830" as="geometry" />
        </mxCell>
        <mxCell id="2AfF7Rdvm8J_M40-1hWI-0" value="&lt;pre style=&quot;background-color: #ffffff ; color: #080808 ; font-family: &amp;quot;jetbrains mono&amp;quot; , monospace ; font-size: 13.5pt&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;与StaticMethodsInterWithOverrideArgs的区别就是最后一个入参，&lt;/span&gt;StaticMethodsInterWithOverrideArgs为OverrideCallable&lt;/pre&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="MEL4W8bCHlu4tCylQ0Ov-1" vertex="1">
          <mxGeometry x="1910" y="80" width="390" height="20" as="geometry" />
        </mxCell>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;加载拦截器实例&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;: &quot;data:page/id,HxEuNIBzY2pLg-Vihr89&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;AGYCwcofuYtpIDbrXRUt-1&quot;],&quot;opacity&quot;:100, &quot;color&quot;: &quot;red&quot;}}]}" id="iNm9DBLSKPnSZa8x8dcZ-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;labelBorderColor=none;fontColor=default;" vertex="1" parent="MEL4W8bCHlu4tCylQ0Ov-1">
            <mxGeometry x="2380" y="160" width="100" height="40" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="mvKNWSNfTr0rxeVtRS0I" name="InstMethodsInter">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WhnV50ItxBo2HkKDLZ-b-0" />
        <mxCell id="WhnV50ItxBo2HkKDLZ-b-1" parent="WhnV50ItxBo2HkKDLZ-b-0" />
        <mxCell id="qzO72jxSOVxGrPL3Md3r-0" value="InstMethodsInter" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="WhnV50ItxBo2HkKDLZ-b-1" vertex="1">
          <mxGeometry x="2160" y="100" width="686" height="944" as="geometry" />
        </mxCell>
        <mxCell id="qzO72jxSOVxGrPL3Md3r-1" value="public InstMethodsInter(String instanceMethodsAroundInterceptorClassName, ClassLoader classLoader)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="qzO72jxSOVxGrPL3Md3r-0" vertex="1">
          <mxGeometry y="26" width="686" height="44" as="geometry" />
        </mxCell>
        <mxCell id="TjCKasd4Xgn7ZYsPb9dK-1" value="" style="group;align=left;" parent="qzO72jxSOVxGrPL3Md3r-0" vertex="1" connectable="0">
          <mxGeometry y="70" width="686" height="874" as="geometry" />
        </mxCell>
        <mxCell id="qzO72jxSOVxGrPL3Md3r-3" value="&lt;pre style=&quot;background-color: #ffffff ; color: #080808 ; font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;span style=&quot;color: #000000&quot;&gt;EnhancedInstance targetObject &lt;/span&gt;= (&lt;span style=&quot;color: #000000&quot;&gt;EnhancedInstance&lt;/span&gt;) obj;&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: #000000&quot;&gt;MethodInterceptResult result &lt;/span&gt;= &lt;span style=&quot;color: #0033b3&quot;&gt;new &lt;/span&gt;MethodInterceptResult();&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #871094&quot;&gt;interceptor&lt;/span&gt;.beforeMethod(&lt;span style=&quot;color: #000000&quot;&gt;targetObject&lt;/span&gt;, method, allArguments, method.getParameterTypes(), &lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;);&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;    &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] before method[{}] intercept failure&quot;&lt;/span&gt;, obj.getClass(), method.getName());&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: #000000&quot;&gt;Object &lt;/span&gt;ret = &lt;span style=&quot;color: #0033b3&quot;&gt;null&lt;/span&gt;;&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;if &lt;/span&gt;(!&lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;.isContinue()) {&lt;br&gt;        ret = &lt;span style=&quot;color: #000000&quot;&gt;result&lt;/span&gt;._ret();&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;else &lt;/span&gt;{&lt;br&gt;        &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;这里为什么使用&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;zuper.call()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;而不是&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;method.invoke(clazz.newInstance())&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;        // redefine&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;和&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;retransform&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;的区别在于是否保留修改前的内容，从反编译的内容可以看到&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;sayHello()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法的内容已经被修改掉了，原方法被重命名为&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;sayHello$original$+&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;随机字符串&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;新的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;sayHello()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法中调用了&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;InstMethodsInter&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;intercept()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法，&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;最后传入的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;intercept()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;method&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;参数是被修改后的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;sayHello()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法，&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;不再指向原生的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;sayHello()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法，&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;如果在&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;InstMethodsInter&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;使用&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;method.invoke(clazz.newInstance())&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;就相当于自己调自己，就会死递归下去&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;        &lt;/span&gt;ret = zuper.call();&lt;br&gt;    }&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;        &lt;span style=&quot;color: #871094&quot;&gt;interceptor&lt;/span&gt;.handleMethodException(&lt;span style=&quot;color: #000000&quot;&gt;targetObject&lt;/span&gt;, method, allArguments, method.getParameterTypes(), t);&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t2) {&lt;br&gt;        &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t2, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] handle method[{}] exception failure&quot;&lt;/span&gt;, obj.getClass(), method.getName());&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;throw &lt;/span&gt;t;&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;finally &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;        ret = &lt;span style=&quot;color: #871094&quot;&gt;interceptor&lt;/span&gt;.afterMethod(&lt;span style=&quot;color: #000000&quot;&gt;targetObject&lt;/span&gt;, method, allArguments, method.getParameterTypes(), ret);&lt;br&gt;    } &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;        &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(t, &lt;span style=&quot;color: #067d17&quot;&gt;&quot;class[{}] after method[{}] intercept failure&quot;&lt;/span&gt;, obj.getClass(), method.getName());&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;return &lt;/span&gt;ret;&lt;/pre&gt;&lt;/pre&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="TjCKasd4Xgn7ZYsPb9dK-1" vertex="1">
          <mxGeometry y="44" width="1120" height="830" as="geometry" />
        </mxCell>
        <object label="public Object intercept(@This Object obj, @AllArguments Object[] allArguments, @SuperCall Callable&lt;?&gt; zuper,&#xa;    @Origin Method method)" id="TjCKasd4Xgn7ZYsPb9dK-0">
          <mxCell style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="TjCKasd4Xgn7ZYsPb9dK-1" vertex="1">
            <mxGeometry width="686" height="44" as="geometry" />
          </mxCell>
        </object>
        <mxCell id="qzO72jxSOVxGrPL3Md3r-2" value="非JDK类库,不修改入参的实例方法走这个拦截器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="WhnV50ItxBo2HkKDLZ-b-1" vertex="1">
          <mxGeometry x="2160" y="60" width="390" height="20" as="geometry" />
        </mxCell>
        <mxCell id="TjCKasd4Xgn7ZYsPb9dK-2" value="这里需要从外部传入classLoader" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="WhnV50ItxBo2HkKDLZ-b-1" vertex="1">
          <mxGeometry x="2890" y="60" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="TjCKasd4Xgn7ZYsPb9dK-3" value="" style="endArrow=classic;html=1;fontFamily=Helvetica;fontSize=18;fontColor=#000000;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WhnV50ItxBo2HkKDLZ-b-1" source="qzO72jxSOVxGrPL3Md3r-1" target="TjCKasd4Xgn7ZYsPb9dK-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2830" y="230" as="sourcePoint" />
            <mxPoint x="2880" y="180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;加载拦截器实例&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;:&quot;data:page/id,HxEuNIBzY2pLg-Vihr89&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;AGYCwcofuYtpIDbrXRUt-1&quot;],&quot;opacity&quot;:100,&quot;color&quot;:&quot;red&quot;}}]}" id="H794sVZ2_KkWjAgtffNl-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;labelBorderColor=none;fontColor=default;" vertex="1" parent="WhnV50ItxBo2HkKDLZ-b-1">
            <mxGeometry x="2700" y="135" width="100" height="40" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="0jK-QHVqDcvVZqY2DwQ2" name="ConstructorInter">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="zNyn7-ciDJHShqQkxn3s-0" />
        <mxCell id="zNyn7-ciDJHShqQkxn3s-1" parent="zNyn7-ciDJHShqQkxn3s-0" />
        <mxCell id="2PPTYwz62WVgmd-tkEZw-0" value="ConstructorInter" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="zNyn7-ciDJHShqQkxn3s-1" vertex="1">
          <mxGeometry x="1910" y="110" width="686" height="944" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-1" value="public ConstructorInter(String constructorInterceptorClassName, ClassLoader classLoader)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2PPTYwz62WVgmd-tkEZw-0" vertex="1">
          <mxGeometry y="26" width="686" height="44" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-2" value="" style="group;align=left;" parent="2PPTYwz62WVgmd-tkEZw-0" vertex="1" connectable="0">
          <mxGeometry y="70" width="686" height="874" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-3" value="&lt;pre style=&quot;background-color: #ffffff ; color: #080808 ; font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;pre style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.5pt&quot;&gt;&lt;span style=&quot;color: #0033b3&quot;&gt;try &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: #000000&quot;&gt;EnhancedInstance targetObject &lt;/span&gt;= (&lt;span style=&quot;color: #000000&quot;&gt;EnhancedInstance&lt;/span&gt;) obj;&lt;br&gt;    &lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;在原生构造器执行之后再执行后调用&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;onConstruct()&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;方法&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;// &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;只能访问到&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;EnhancedInstance&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;类型的字段&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt; _$EnhancedClassField_ws&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;    // &lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;拦截器的&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;onConstruct&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;把某些数据存储到&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic&quot;&gt;_$EnhancedClassField_ws&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;字段中&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #8c8c8c ; font-style: italic ; font-family: &amp;#34;宋体&amp;#34; , monospace&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #871094&quot;&gt;interceptor&lt;/span&gt;.onConstruct(&lt;span style=&quot;color: #000000&quot;&gt;targetObject&lt;/span&gt;, allArguments);&lt;br&gt;} &lt;span style=&quot;color: #0033b3&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color: #000000&quot;&gt;Throwable &lt;/span&gt;t) {&lt;br&gt;    &lt;span style=&quot;color: #871094 ; font-style: italic&quot;&gt;LOGGER&lt;/span&gt;.error(&lt;span style=&quot;color: #067d17&quot;&gt;&quot;ConstructorInter failure.&quot;&lt;/span&gt;, t);&lt;br&gt;}&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="2PPTYwz62WVgmd-tkEZw-2" vertex="1">
          <mxGeometry y="44" width="1120" height="830" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-4" value="public void intercept(@This Object obj, @AllArguments Object[] allArguments)" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="2PPTYwz62WVgmd-tkEZw-2" vertex="1">
          <mxGeometry width="686" height="44" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-5" value="非JDK类库,普通实例构造器走这个拦截器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="zNyn7-ciDJHShqQkxn3s-1" vertex="1">
          <mxGeometry x="1910" y="70" width="340" height="20" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-6" value="这里需要从外部传入classLoader" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;fontColor=#000000;" parent="zNyn7-ciDJHShqQkxn3s-1" vertex="1">
          <mxGeometry x="2640" y="70" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2PPTYwz62WVgmd-tkEZw-7" value="" style="endArrow=classic;html=1;fontFamily=Helvetica;fontSize=18;fontColor=#000000;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="zNyn7-ciDJHShqQkxn3s-1" source="2PPTYwz62WVgmd-tkEZw-1" target="2PPTYwz62WVgmd-tkEZw-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2580" y="240" as="sourcePoint" />
            <mxPoint x="2630" y="190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;span style=&quot;background-color: rgb(178 , 102 , 255)&quot;&gt;加载拦截器实例&lt;/span&gt;" link="data:action/json,{&quot;actions&quot;:[{&quot;open&quot;:&quot;data:page/id,HxEuNIBzY2pLg-Vihr89&quot;},{&quot;highlight&quot;:{&quot;cells&quot;:[&quot;AGYCwcofuYtpIDbrXRUt-1&quot;],&quot;opacity&quot;:100,&quot;color&quot;:&quot;red&quot;}}]}" id="UvCXWZZOtWKJ0OYvX1eB-0">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;labelBackgroundColor=#B266FF;labelBorderColor=none;fontColor=default;" vertex="1" parent="zNyn7-ciDJHShqQkxn3s-1">
            <mxGeometry x="2400" y="150" width="100" height="30" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="HxEuNIBzY2pLg-Vihr89" name="InterceptorInstanceLoader">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="jL7pYaSkI-VLbAl84ca5-0" />
        <mxCell id="jL7pYaSkI-VLbAl84ca5-1" parent="jL7pYaSkI-VLbAl84ca5-0" />
        <mxCell id="AGYCwcofuYtpIDbrXRUt-0" value="InterceptorInstanceLoader" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="jL7pYaSkI-VLbAl84ca5-1" vertex="1">
          <mxGeometry x="1910" y="110" width="686" height="76" as="geometry" />
        </mxCell>
        <mxCell id="AGYCwcofuYtpIDbrXRUt-1" value="public static &lt;T&gt; T load(String className,ClassLoader targetClassLoader)&#xa;&#xa;加载拦截器实例,并为拦截器创建对应的agentClassLoader,该agentClassLoader的parent为被拦截类的classloader" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="AGYCwcofuYtpIDbrXRUt-0" vertex="1">
          <mxGeometry y="26" width="686" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="OAw_hoLMBTS5bxCV4UUr" name="BootstrapInstrumentBoost">
    <mxGraphModel dx="-616" dy="609" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="g6Urny8PRm-vhi32PskJ-1" value="BootstrapInstrumentBoost" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1740" y="110" width="686" height="191" as="geometry" />
        </mxCell>
        <mxCell id="DOyYYOP1NbwbdsIWEw-B-1" value="调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="g6Urny8PRm-vhi32PskJ-1" source="g6Urny8PRm-vhi32PskJ-2" target="g6Urny8PRm-vhi32PskJ-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <object label="public static AgentBuilder inject(PluginFinder pluginFinder, Instrumentation instrumentation,&#xa;    AgentBuilder agentBuilder, JDK9ModuleExporter.EdgeClasses edgeClasses)&#xa;&#xa;将生成的类注入" id="g6Urny8PRm-vhi32PskJ-2">
          <mxCell style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="g6Urny8PRm-vhi32PskJ-1" vertex="1">
            <mxGeometry y="26" width="686" height="65" as="geometry" />
          </mxCell>
        </object>
        <object label="private static boolean prepareJREInstrumentation(PluginFinder pluginFinder,Map&lt;String, byte[]&gt; classesTypeMap)&#xa;&#xa;使用模板生成代理器" id="g6Urny8PRm-vhi32PskJ-3">
          <mxCell style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="g6Urny8PRm-vhi32PskJ-1" vertex="1">
            <mxGeometry y="91" width="686" height="50" as="geometry" />
          </mxCell>
        </object>
        <object label="public static Class forInternalDelegateClass(String methodsInterceptor)&#xa;&#xa;如果是JDK类库中的类初始化中间代理类(在此之前已使用inject注入了拦截器)" id="DOyYYOP1NbwbdsIWEw-B-2">
          <mxCell style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="g6Urny8PRm-vhi32PskJ-1" vertex="1">
            <mxGeometry y="141" width="686" height="50" as="geometry" />
          </mxCell>
        </object>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
